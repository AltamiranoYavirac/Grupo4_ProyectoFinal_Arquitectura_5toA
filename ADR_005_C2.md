# ADR 005: Diagrama de Contenedores - Aplicación de Recordatorios Médicos

### Fecha:
2025-10-20

### Estado:
Aceptado

## Contexto:
El diagrama de contenedores (C2) detalla la estructura interna del sistema descrito en el C1, mostrando los principales contenedores de software que conforman la aplicación móvil, sus responsabilidades, tecnologías utilizadas y las interacciones entre ellos. El objetivo es clarificar cómo se distribuyen las funciones dentro del sistema y cómo se comunican los distintos módulos.

## Decisión:
Descomponer la **App Recordatorios Médicos** en los siguientes contenedores:

- **Aplicación Flutter**  
  *Framework:* Flutter (Dart)  
  *Función:* Interfaz gráfica y lógica principal. Permite al usuario configurar medicinas, citas y recibir notificaciones.  
  *Interacción:* Lee y escribe datos en la base local; programa y cancela notificaciones.

- **Base de Datos Local**  
  *Tecnología:* SQLite  
  *Función:* Almacena información sobre medicinas, citas, horarios y configuraciones del usuario.  
  *Interacción:* Persistencia local; intercambio de datos con la aplicación Flutter.

- **Servicio de Notificaciones**  
  *Tecnología:* flutter_local_notifications + android_alarm_manager_plus  
  *Función:* Gestiona alarmas y recordatorios programados.  
  *Interacción:* Solicita mostrar notificaciones a través del sistema operativo móvil.

- **Sistema Operativo Móvil (Android/iOS)**  
  *Función:* Ejecuta alarmas y muestra notificaciones al usuario final.  
  *Interacción:* Actúa como servicio externo que ejecuta y despliega recordatorios.

## Consecuencias:
- Se obtiene una vista clara de la arquitectura interna y las responsabilidades de cada componente.  
- Facilita la documentación técnica y la planificación del desarrollo.  
- La arquitectura modular permite mantenimiento sencillo y reemplazo de componentes (por ejemplo, cambiar SQLite por otro motor local).  
- La dependencia en servicios locales garantiza funcionamiento offline y privacidad.

## Alternativas Consideradas:
- Implementar un contenedor de backend remoto para sincronización (rechazado para mantener independencia y privacidad).  
- Centralizar la lógica de notificaciones en la capa del sistema operativo (descartado, ya que Flutter ofrece control total mediante librerías dedicadas).

## Razón de la Decisión:
El nivel C2 se basa en la necesidad de definir claramente cómo se organiza internamente la aplicación, garantizando eficiencia, privacidad y simplicidad técnica. La elección de Flutter, SQLite y librerías nativas permite un desarrollo multiplataforma, sin requerir backend ni servicios externos, manteniendo el enfoque del ADR001 sobre operación offline y seguridad local.
